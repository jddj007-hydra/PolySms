# PolySms å¿«é€Ÿå¼€å§‹æŒ‡å—

æœ¬æŒ‡å—å°†å¸®åŠ©æ‚¨å¿«é€Ÿé›†æˆPolySmsåˆ°é¡¹ç›®ä¸­ï¼Œäº«å—è½»é‡çº§ã€é«˜æ€§èƒ½çš„å¤šäº‘çŸ­ä¿¡æœåŠ¡ã€‚

## ğŸ“¦ å®‰è£…

PolySmsåªéœ€è¦ä¸€ä¸ªåŒ…ï¼ŒåŒ…å«æ‰€æœ‰åŠŸèƒ½ï¼š

### NuGet Package Manager
```bash
dotnet add package PolySms
```

### Package Manager Console
```powershell
Install-Package PolySms
```

### PackageReference (æ¨è)
```xml
<PackageReference Include="PolySms" Version="1.0.0" />
```

## ğŸš€ 5åˆ†é’Ÿå¿«é€Ÿé›†æˆ

### æ­¥éª¤1: å®‰è£…åŒ…

```bash
dotnet add package PolySms
```

### æ­¥éª¤2: é…ç½®æœåŠ¡

åœ¨`Program.cs`ä¸­æ·»åŠ æœåŠ¡æ³¨å†Œï¼š

```csharp
using PolySms.Extensions;

var builder = WebApplication.CreateBuilder(args);

// æ·»åŠ PolySmsæœåŠ¡
builder.Services.AddPolySms(builder.Configuration);

var app = builder.Build();
```

### æ­¥éª¤3: é…ç½®å‚æ•°

åœ¨`appsettings.json`ä¸­æ·»åŠ é…ç½®ï¼š

```json
{
  "Sms": {
    "DefaultProvider": "Aliyun",
    "EnableFailover": true,
    "ProviderPriority": ["Aliyun", "Tencent"]
  },
  "AliyunSms": {
    "AccessKeyId": "your-aliyun-access-key-id",
    "AccessKeySecret": "your-aliyun-access-key-secret"
  },
  "TencentSms": {
    "SecretId": "your-tencent-secret-id",
    "SecretKey": "your-tencent-secret-key",
    "SmsSdkAppId": "your-sms-sdk-app-id",
    "Region": "ap-beijing"
  }
}
```

### æ­¥éª¤4: ä½¿ç”¨æœåŠ¡

```csharp
using PolySms.Interfaces;
using PolySms.Models;

[ApiController]
[Route("api/[controller]")]
public class SmsController : ControllerBase
{
    private readonly ISmsService _smsService;

    public SmsController(ISmsService smsService)
    {
        _smsService = smsService;
    }

    [HttpPost("send")]
    public async Task<IActionResult> SendSms([FromBody] SendSmsRequest request)
    {
        var smsRequest = new SmsRequest
        {
            PhoneNumber = request.PhoneNumber,
            TemplateId = request.TemplateId,
            SignName = request.SignName,
            TemplateParams = request.TemplateParams
        };

        var response = await _smsService.SendSmsAsync(smsRequest);

        if (response.IsSuccess)
        {
            return Ok(new {
                success = true,
                requestId = response.RequestId,
                provider = response.Provider
            });
        }

        return BadRequest(new {
            success = false,
            errorCode = response.ErrorCode,
            errorMessage = response.ErrorMessage,
            friendlyMessage = response.FriendlyErrorMessage,
            isRetryable = response.IsRetryable,
            provider = response.Provider,
            standardErrorCode = response.StandardErrorCode.ToString()
        });
    }
}

public class SendSmsRequest
{
    public string PhoneNumber { get; set; } = string.Empty;
    public string TemplateId { get; set; } = string.Empty;
    public string SignName { get; set; } = string.Empty;
    public Dictionary<string, string> TemplateParams { get; set; } = new();
}
```

## ğŸ’¡ å¸¸è§ä½¿ç”¨åœºæ™¯

### åœºæ™¯1: éªŒè¯ç å‘é€ï¼ˆå«é”™è¯¯å¤„ç†ï¼‰

```csharp
public class VerificationService
{
    private readonly ISmsService _smsService;
    private readonly ILogger<VerificationService> _logger;

    public VerificationService(ISmsService smsService, ILogger<VerificationService> logger)
    {
        _smsService = smsService;
        _logger = logger;
    }

    public async Task<VerificationResult> SendVerificationCode(string phoneNumber)
    {
        var code = GenerateRandomCode(6);

        var request = new SmsRequest
        {
            PhoneNumber = phoneNumber,
            TemplateId = "SMS_VERIFICATION_001", // æ‚¨çš„éªŒè¯ç æ¨¡æ¿ID
            SignName = "æ‚¨çš„åº”ç”¨",
            TemplateParams = new Dictionary<string, string>
            {
                { "code", code },
                { "expire", "5" } // 5åˆ†é’Ÿè¿‡æœŸ
            }
        };

        var response = await _smsService.SendSmsAsync(request);

        if (response.IsSuccess)
        {
            // ä¿å­˜éªŒè¯ç åˆ°ç¼“å­˜/æ•°æ®åº“
            await SaveVerificationCode(phoneNumber, code);
            _logger.LogInformation("éªŒè¯ç å‘é€æˆåŠŸ: {PhoneNumber}, RequestId: {RequestId}",
                phoneNumber, response.RequestId);

            return new VerificationResult
            {
                Success = true,
                RequestId = response.RequestId,
                Message = "éªŒè¯ç å‘é€æˆåŠŸ"
            };
        }

        // ä½¿ç”¨æ ‡å‡†åŒ–é”™è¯¯å¤„ç†
        var errorMessage = HandleSmsError(response);
        _logger.LogWarning("éªŒè¯ç å‘é€å¤±è´¥: {PhoneNumber}, é”™è¯¯: {ErrorMessage}, å¯é‡è¯•: {IsRetryable}",
            phoneNumber, errorMessage, response.IsRetryable);

        return new VerificationResult
        {
            Success = false,
            ErrorMessage = errorMessage,
            IsRetryable = response.IsRetryable,
            StandardErrorCode = response.StandardErrorCode
        };
    }

    private string HandleSmsError(SmsResponse response)
    {
        return response.StandardErrorCode switch
        {
            StandardErrorCode.RateLimitExceeded => "å‘é€é¢‘ç‡è¿‡é«˜ï¼Œè¯·1åˆ†é’Ÿåé‡è¯•",
            StandardErrorCode.InsufficientBalance => "è´¦æˆ·ä½™é¢ä¸è¶³ï¼Œè¯·è”ç³»ç®¡ç†å‘˜å……å€¼",
            StandardErrorCode.TemplateNotFound => "çŸ­ä¿¡æ¨¡æ¿é…ç½®é”™è¯¯ï¼Œè¯·è”ç³»æŠ€æœ¯æ”¯æŒ",
            StandardErrorCode.InvalidPhoneNumber => "æ‰‹æœºå·ç æ ¼å¼ä¸æ­£ç¡®",
            StandardErrorCode.NetworkError => "ç½‘ç»œè¿æ¥å¼‚å¸¸ï¼Œè¯·ç¨åé‡è¯•",
            _ => response.FriendlyErrorMessage ?? "å‘é€å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•"
        };
    }

    private string GenerateRandomCode(int length)
    {
        var random = new Random();
        return string.Join("", Enumerable.Range(0, length)
            .Select(_ => random.Next(0, 10).ToString()));
    }

    private async Task SaveVerificationCode(string phoneNumber, string code)
    {
        // å®ç°éªŒè¯ç ä¿å­˜é€»è¾‘ï¼ˆRedisã€æ•°æ®åº“ç­‰ï¼‰
        await Task.CompletedTask;
    }
}

public class VerificationResult
{
    public bool Success { get; set; }
    public string? RequestId { get; set; }
    public string? ErrorMessage { get; set; }
    public bool IsRetryable { get; set; }
    public StandardErrorCode StandardErrorCode { get; set; }
    public string Message { get; set; } = string.Empty;
}
```

### åœºæ™¯2: æŒ‡å®šæä¾›å•†å‘é€

```csharp
public class SmsBusinessService
{
    private readonly ISmsService _smsService;
    private readonly ILogger<SmsBusinessService> _logger;

    public SmsBusinessService(ISmsService smsService, ILogger<SmsBusinessService> logger)
    {
        _smsService = smsService;
        _logger = logger;
    }

    public async Task<SmsResponse> SendMarketingSms(string phoneNumber, string content)
    {
        var request = new SmsRequest
        {
            PhoneNumber = phoneNumber,
            TemplateId = "MARKETING_001",
            SignName = "è¥é”€ä¸­å¿ƒ",
            TemplateParams = new Dictionary<string, string>
            {
                { "content", content }
            }
        };

        // è¥é”€çŸ­ä¿¡ä½¿ç”¨è…¾è®¯äº‘
        var response = await _smsService.SendSmsAsync(request, "Tencent");

        LogSmsResult(response, "è¥é”€çŸ­ä¿¡", phoneNumber);
        return response;
    }

    public async Task<SmsResponse> SendSystemNotification(string phoneNumber, string message)
    {
        var request = new SmsRequest
        {
            PhoneNumber = phoneNumber,
            TemplateId = "SYSTEM_001",
            SignName = "ç³»ç»Ÿé€šçŸ¥",
            TemplateParams = new Dictionary<string, string>
            {
                { "message", message }
            }
        };

        // ç³»ç»Ÿé€šçŸ¥ä½¿ç”¨é˜¿é‡Œäº‘
        var response = await _smsService.SendSmsAsync(request, SmsProvider.Aliyun);

        LogSmsResult(response, "ç³»ç»Ÿé€šçŸ¥", phoneNumber);
        return response;
    }

    private void LogSmsResult(SmsResponse response, string scenario, string phoneNumber)
    {
        if (response.IsSuccess)
        {
            _logger.LogInformation("{Scenario}å‘é€æˆåŠŸ: {PhoneNumber}, Provider: {Provider}, RequestId: {RequestId}",
                scenario, phoneNumber, response.Provider, response.RequestId);
        }
        else
        {
            _logger.LogWarning("{Scenario}å‘é€å¤±è´¥: {PhoneNumber}, Provider: {Provider}, é”™è¯¯: {FriendlyMessage}, å¯é‡è¯•: {IsRetryable}",
                scenario, phoneNumber, response.Provider, response.FriendlyErrorMessage, response.IsRetryable);
        }
    }
}
```

### åœºæ™¯3: æ™ºèƒ½é‡è¯•æœºåˆ¶æ‰¹é‡å‘é€

```csharp
public class BatchSmsService
{
    private readonly ISmsService _smsService;
    private readonly ILogger<BatchSmsService> _logger;

    public BatchSmsService(ISmsService smsService, ILogger<BatchSmsService> logger)
    {
        _smsService = smsService;
        _logger = logger;
    }

    public async Task<BatchSmsResult> SendBatchSmsWithRetry(
        List<string> phoneNumbers,
        string templateId,
        string signName,
        Dictionary<string, string> templateParams,
        int maxRetries = 3)
    {
        var results = new List<SmsResponse>();
        var successCount = 0;

        foreach (var phoneNumber in phoneNumbers)
        {
            try
            {
                var request = new SmsRequest
                {
                    PhoneNumber = phoneNumber,
                    TemplateId = templateId,
                    SignName = signName,
                    TemplateParams = templateParams
                };

                var response = await SendWithIntelligentRetry(request, maxRetries);
                results.Add(response);

                if (response.IsSuccess)
                {
                    successCount++;
                    _logger.LogInformation("SMS sent successfully to {PhoneNumber} via {Provider}",
                        phoneNumber, response.Provider);
                }
                else
                {
                    _logger.LogWarning("Failed to send SMS to {PhoneNumber}: {ErrorMessage} (StandardError: {StandardErrorCode})",
                        phoneNumber, response.FriendlyErrorMessage, response.StandardErrorCode);
                }
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "Exception occurred while sending SMS to {PhoneNumber}", phoneNumber);
                results.Add(new SmsResponse
                {
                    IsSuccess = false,
                    ErrorCode = "EXCEPTION",
                    ErrorMessage = ex.Message,
                    StandardErrorCode = StandardErrorCode.Unknown,
                    FriendlyErrorMessage = "å‘é€æ—¶å‘ç”Ÿå¼‚å¸¸"
                });
            }

            // é¿å…é¢‘ç‡é™åˆ¶
            await Task.Delay(200);
        }

        return new BatchSmsResult
        {
            TotalCount = phoneNumbers.Count,
            SuccessCount = successCount,
            FailureCount = phoneNumbers.Count - successCount,
            Results = results
        };
    }

    private async Task<SmsResponse> SendWithIntelligentRetry(SmsRequest request, int maxRetries)
    {
        var response = await _smsService.SendSmsAsync(request);

        int retryCount = 0;
        while (!response.IsSuccess && response.IsRetryable && retryCount < maxRetries)
        {
            retryCount++;

            // æ ¹æ®é”™è¯¯ç±»å‹å†³å®šé‡è¯•å»¶è¿Ÿ
            var delay = response.StandardErrorCode switch
            {
                StandardErrorCode.RateLimitExceeded => TimeSpan.FromSeconds(60), // é¢‘ç‡é™åˆ¶ç­‰å¾…1åˆ†é’Ÿ
                StandardErrorCode.NetworkError => TimeSpan.FromSeconds(5),       // ç½‘ç»œé”™è¯¯ç­‰å¾…5ç§’
                StandardErrorCode.ProviderInternalError => TimeSpan.FromSeconds(10), // æœåŠ¡å•†å†…éƒ¨é”™è¯¯ç­‰å¾…10ç§’
                _ => TimeSpan.FromSeconds(3)                                      // å…¶ä»–å¯é‡è¯•é”™è¯¯ç­‰å¾…3ç§’
            };

            _logger.LogWarning("ç¬¬ {RetryCount} æ¬¡é‡è¯•å‘é€åˆ° {PhoneNumber}ï¼Œå»¶è¿Ÿ {Delay}s: {ErrorMessage}",
                retryCount, request.PhoneNumber, delay.TotalSeconds, response.FriendlyErrorMessage);

            await Task.Delay(delay);
            response = await _smsService.SendSmsAsync(request);
        }

        return response;
    }
}

public class BatchSmsResult
{
    public int TotalCount { get; set; }
    public int SuccessCount { get; set; }
    public int FailureCount { get; set; }
    public List<SmsResponse> Results { get; set; } = new();

    public double SuccessRate => TotalCount > 0 ? (double)SuccessCount / TotalCount * 100 : 0;
}
```

## ğŸ”§ é«˜çº§é…ç½®

### ä»£ç é…ç½®æ–¹å¼

å¦‚æœæ‚¨æ›´å–œæ¬¢åœ¨ä»£ç ä¸­é…ç½®ï¼š

```csharp
builder.Services.AddPolySms(
    sms => {
        sms.DefaultProvider = "Tencent";
        sms.EnableFailover = true;
        sms.ProviderPriority = new List<string> { "Tencent", "Aliyun" };
    },
    aliyun => {
        aliyun.AccessKeyId = "your-access-key-id";
        aliyun.AccessKeySecret = "your-access-key-secret";
        aliyun.Endpoint = "dysmsapi.aliyuncs.com";
    },
    tencent => {
        tencent.SecretId = "your-secret-id";
        tencent.SecretKey = "your-secret-key";
        tencent.SmsSdkAppId = "1400000000";
        tencent.Region = "ap-beijing";
    }
);
```

### ç¯å¢ƒå˜é‡é…ç½®

é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®æ•æ„Ÿä¿¡æ¯ï¼š

```bash
export AliyunSms__AccessKeyId="your-aliyun-access-key-id"
export AliyunSms__AccessKeySecret="your-aliyun-access-key-secret"
export TencentSms__SecretId="your-tencent-secret-id"
export TencentSms__SecretKey="your-tencent-secret-key"
export TencentSms__SmsSdkAppId="your-sms-sdk-app-id"
```

### å¤šç¯å¢ƒé…ç½®

```json
// appsettings.Development.json
{
  "Sms": {
    "DefaultProvider": "Aliyun",
    "EnableFailover": false  // å¼€å‘ç¯å¢ƒå…³é—­æ•…éšœè½¬ç§»
  }
}

// appsettings.Production.json
{
  "Sms": {
    "DefaultProvider": "Tencent",
    "EnableFailover": true,
    "ProviderPriority": ["Tencent", "Aliyun"]  // ç”Ÿäº§ç¯å¢ƒå¯ç”¨æ•…éšœè½¬ç§»
  }
}
```

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜1: ä¾èµ–æ³¨å…¥å¤±è´¥

**é”™è¯¯**: `Unable to resolve service for type 'ISmsService'`

**è§£å†³æ–¹æ¡ˆ**: ç¡®ä¿å·²æ­£ç¡®æ³¨å†ŒæœåŠ¡
```csharp
builder.Services.AddPolySms(builder.Configuration);
```

### å¸¸è§é—®é¢˜2: é…ç½®å‚æ•°ç¼ºå¤±

**é”™è¯¯**: å‘é€å¤±è´¥ï¼ŒStandardErrorCodeä¸ºAuthenticationFailed

**è§£å†³æ–¹æ¡ˆ**: æ£€æŸ¥é…ç½®å‚æ•°æ˜¯å¦å®Œæ•´
```json
{
  "AliyunSms": {
    "AccessKeyId": "å¿…å¡«",
    "AccessKeySecret": "å¿…å¡«"
  },
  "TencentSms": {
    "SecretId": "å¿…å¡«",
    "SecretKey": "å¿…å¡«",
    "SmsSdkAppId": "å¿…å¡«"
  }
}
```

### å¸¸è§é—®é¢˜3: ç­¾åæˆ–æ¨¡æ¿é—®é¢˜

**é”™è¯¯**: StandardErrorCodeä¸ºTemplateNotFoundæˆ–SignatureNotFound

**è§£å†³æ–¹æ¡ˆ**:
1. åœ¨äº‘æœåŠ¡å•†æ§åˆ¶å°åˆ›å»ºçŸ­ä¿¡ç­¾å
2. åˆ›å»ºå¹¶å®¡æ ¸é€šè¿‡çŸ­ä¿¡æ¨¡æ¿
3. ç¡®ä¿`SignName`å’Œ`TemplateId`æ­£ç¡®

### å¸¸è§é—®é¢˜4: é¢‘ç‡é™åˆ¶

**é”™è¯¯**: StandardErrorCodeä¸ºRateLimitExceeded

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥å‘é€é¢‘ç‡æ˜¯å¦è¿‡é«˜
2. å®ç°æ™ºèƒ½é‡è¯•æœºåˆ¶
3. ä½¿ç”¨æ‰¹é‡å‘é€æ—¶å¢åŠ å»¶è¿Ÿ

## ğŸ” æ—¥å¿—å’Œç›‘æ§

å¯ç”¨è¯¦ç»†æ—¥å¿—ä»¥ä¾¿è°ƒè¯•ï¼š

```json
{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "PolySms": "Debug",
      "PolySms.Services.SmsService": "Trace"
    }
  }
}
```

## ğŸ›¡ï¸ é”™è¯¯å¤„ç†æœ€ä½³å®è·µ

### ä½¿ç”¨æ ‡å‡†åŒ–é”™è¯¯ç 

```csharp
public class SmsErrorHandler
{
    public static string GetUserFriendlyMessage(SmsResponse response)
    {
        return response.StandardErrorCode switch
        {
            StandardErrorCode.Success => "å‘é€æˆåŠŸ",
            StandardErrorCode.InvalidParameter => "å‚æ•°é…ç½®é”™è¯¯ï¼Œè¯·æ£€æŸ¥æ‰‹æœºå·å’Œæ¨¡æ¿å‚æ•°",
            StandardErrorCode.AuthenticationFailed => "è®¤è¯å¤±è´¥ï¼Œè¯·æ£€æŸ¥è®¿é—®å¯†é’¥é…ç½®",
            StandardErrorCode.InsufficientBalance => "è´¦æˆ·ä½™é¢ä¸è¶³ï¼Œè¯·åŠæ—¶å……å€¼",
            StandardErrorCode.RateLimitExceeded => "å‘é€é¢‘ç‡è¿‡é«˜ï¼Œè¯·ç¨åé‡è¯•",
            StandardErrorCode.TemplateNotFound => "çŸ­ä¿¡æ¨¡æ¿ä¸å­˜åœ¨ï¼Œè¯·æ£€æŸ¥æ¨¡æ¿ID",
            StandardErrorCode.SignatureNotFound => "çŸ­ä¿¡ç­¾åä¸å­˜åœ¨ï¼Œè¯·æ£€æŸ¥ç­¾åé…ç½®",
            StandardErrorCode.InvalidPhoneNumber => "æ‰‹æœºå·ç æ ¼å¼é”™è¯¯",
            StandardErrorCode.NetworkError => "ç½‘ç»œè¿æ¥å¼‚å¸¸ï¼Œè¯·æ£€æŸ¥ç½‘ç»œæˆ–ç¨åé‡è¯•",
            StandardErrorCode.ProviderInternalError => "æœåŠ¡å•†å†…éƒ¨é”™è¯¯ï¼Œå»ºè®®åˆ‡æ¢å…¶ä»–æä¾›å•†",
            _ => response.FriendlyErrorMessage ?? "å‘é€å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•"
        };
    }

    public static bool ShouldRetry(SmsResponse response)
    {
        // ä½¿ç”¨SDKå†…ç½®çš„é‡è¯•åˆ¤æ–­é€»è¾‘
        return response.IsRetryable;
    }

    public static TimeSpan GetRetryDelay(SmsResponse response)
    {
        return response.StandardErrorCode switch
        {
            StandardErrorCode.RateLimitExceeded => TimeSpan.FromMinutes(1),
            StandardErrorCode.NetworkError => TimeSpan.FromSeconds(5),
            StandardErrorCode.ProviderInternalError => TimeSpan.FromSeconds(10),
            _ => TimeSpan.FromSeconds(3)
        };
    }
}
```

## ğŸš€ æ€§èƒ½ä¼˜åŠ¿

ç›¸æ¯”ä¼ ç»ŸSDKæ–¹æ¡ˆï¼ŒPolySmså…·æœ‰æ˜¾è‘—ä¼˜åŠ¿ï¼š

| æŒ‡æ ‡ | ä¼ ç»ŸSDKæ–¹æ¡ˆ | PolySms | æ”¹è¿› |
|------|------------|---------|------|
| åŒ…ä½“ç§¯ | ~50MB | ~20KB | â†“99.96% |
| å¯åŠ¨æ—¶é—´ | 2-3ç§’ | 0.2-0.3ç§’ | â†“90% |
| å†…å­˜å ç”¨ | 50-80MB | 10-15MB | â†“80% |
| ä¾èµ–å†²çª | ç»å¸¸å‘ç”Ÿ | å‡ ä¹æ²¡æœ‰ | æ˜¾è‘—æ”¹å–„ |
| é”™è¯¯å¤„ç† | å„è‡ªç‹¬ç«‹ | ç»Ÿä¸€æ ‡å‡†åŒ– | æ˜¾è‘—æ”¹å–„ |

## ğŸ”„ ä»ä¼ ç»ŸSDKè¿ç§»

å¦‚æœæ‚¨ä¹‹å‰ä½¿ç”¨å…¶ä»–çŸ­ä¿¡SDKï¼Œè¿ç§»éå¸¸ç®€å•ï¼š

### 1. æ›¿æ¢åŒ…å¼•ç”¨
```xml
<!-- åˆ é™¤æ—§çš„åŒ… -->
<PackageReference Include="AlibabaCloud.SDK.Dysmsapi20170525" />
<PackageReference Include="TencentCloudSDK" />

<!-- æ›¿æ¢ä¸º -->
<PackageReference Include="PolySms" Version="1.0.0" />
```

### 2. æ›´æ–°ä»£ç 
```csharp
// æ—§çš„æ–¹å¼ï¼ˆé˜¿é‡Œäº‘SDKç¤ºä¾‹ï¼‰
var client = new DefaultAcsClient(profile);
var request = new SendSmsRequest();
request.PhoneNumbers = phoneNumber;
request.SignName = signName;
request.TemplateCode = templateCode;
request.TemplateParam = JsonConvert.SerializeObject(templateParams);
var response = client.GetAcsResponse(request);

// æ–°çš„æ–¹å¼ï¼ˆPolySmsï¼‰
var request = new SmsRequest
{
    PhoneNumber = phoneNumber,
    SignName = signName,
    TemplateId = templateCode,
    TemplateParams = templateParams
};
var response = await _smsService.SendSmsAsync(request);
```

### 3. æ›´æ–°é”™è¯¯å¤„ç†
```csharp
// æ—§çš„æ–¹å¼
if (response.Code == "OK")
{
    // æˆåŠŸ
}
else
{
    // å¤„ç†å„ç§ä¸åŒçš„é”™è¯¯ç 
}

// æ–°çš„æ–¹å¼
if (response.IsSuccess)
{
    // æˆåŠŸ
}
else
{
    // ä½¿ç”¨æ ‡å‡†åŒ–é”™è¯¯ç ç»Ÿä¸€å¤„ç†
    switch (response.StandardErrorCode)
    {
        case StandardErrorCode.RateLimitExceeded:
            // é¢‘ç‡é™åˆ¶
            break;
        // å…¶ä»–é”™è¯¯ç±»å‹...
    }
}
```

## ğŸ‰ å®Œæˆï¼

ç°åœ¨æ‚¨å·²ç»æˆåŠŸé›†æˆäº†PolySmsï¼äº«å—ï¼š

- **99.96%çš„åŒ…ä½“ç§¯å‡å°‘**
- **æ›´å¿«çš„å¯åŠ¨é€Ÿåº¦**
- **æ›´å°‘çš„ä¾èµ–å†²çª**
- **ç»Ÿä¸€çš„é”™è¯¯å¤„ç†ä½“éªŒ**
- **æ™ºèƒ½é‡è¯•æœºåˆ¶**
- **å®Œå…¨ç›¸åŒçš„åŠŸèƒ½**

## ğŸ“š è¿›ä¸€æ­¥é˜…è¯»

- [æ¶æ„è®¾è®¡æ–‡æ¡£](æ¶æ„è®¾è®¡.md) - äº†è§£PolySmsçš„æŠ€æœ¯æ¶æ„
- [é…ç½®è¯´æ˜æ–‡æ¡£](é…ç½®è¯´æ˜.md) - è¯¦ç»†çš„é…ç½®é€‰é¡¹è¯´æ˜
- [APIå·®å¼‚å¤„ç†æ–‡æ¡£](APIå·®å¼‚å¤„ç†.md) - äº†è§£å†…éƒ¨å®ç°è¯¦æƒ…
- [ç¤ºä¾‹é¡¹ç›®](../Example/Program.cs) - è·å–æ›´å¤šä½¿ç”¨ç¤ºä¾‹

å¦‚æœé‡åˆ°ä»»ä½•é—®é¢˜ï¼Œè¯·å‚è€ƒå…¶ä»–æ–‡æ¡£æˆ–æäº¤Issueã€‚